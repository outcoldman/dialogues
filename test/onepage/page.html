<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>One page test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/github.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.4.0/moment.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/marked/0.2.9/marked.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
    <script src="/scripts/dlgs.js"></script>
    <style>
      .dlgs {
        width: 80%;
        padding: 10px 20px;
        margin: 0 auto;
      }

      .dlgs-list {
        list-style: none;
        padding: 0;
      }

        .dlgs-list .dlgs-comment {
          width: 100%;
          min-height: 100px;
          margin-bottom: 20px;
        }

        .dlgs-list .dlgs-comment:last-child {
          margin-bottom: 0px;
        }

          .dlgs-list .dlgs-comment img.dlgs-participant-avatar {
            border-radius: 50%;
            float: left;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-header {
            margin-left: 100px;
            margin-bottom: 10px;
          }


          .dlgs-list .dlgs-comment .dlgs-comment-header a.dlgs-participant-name {
            font-size:large;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-header a.dlgs-participant-name[disabled] {
            color: #555;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-header a.dlgs-participant-name[disabled]:hover {
            text-decoration: none;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-header a.dlgs-comment-link {
            color: black;
            opacity: .5;
            font-size: small;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-header a.dlgs-comment-link:hover {
            text-decoration: none;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-header a.dlgs-comment-link:before {
            content: "Â·";
            margin-right: 5px;
            margin-left: 5px;
          }

          .dlgs-list .dlgs-comment .dlgs-comment-body {
            border-bottom: 1px dashed #dbdbdb;
            padding: 5px 10px 20px 10px;
            margin-left: 100px;
          }

          .dlgs .dlgs-form {
            margin-top: 20px;
          }

          .dlgs .dlgs-form div.dlgs-comment-preview{
            border: 1px dashed #dbdbdb;
            padding: 10px 10px 10px 10px;
            margin: 5px 0px 10px 0px;
          }

          .dlgs .dlgs-form div.dlgs-comment-preview:empty {
            display: none;
          }

          .dlgs-form .form-actions {
              margin: 0 0 0 0;
              background-color: transparent;
              text-align: right;
          }

        #example_1 .dlgs-list, #example_1 .dlgs-list {
          max-height: 300px;
          overflow: auto;
        }
    </style>
    <script>
      var customDateFormatter = function(date) {
        return moment.unix(date + (new Date()).getTimezoneOffset()*60).fromNow();
      };

      var markdownBodyFormatter = function(text) {
        return marked(text);
      };

      (function() {
        marked.setOptions({
          highlight: function (code, lang) {
            try {
              if (code) {
                return hljs.highlight(lang, code, false).value;
              }
            } catch (e) {
              console.error(e);
              return hljs.highlightAuto(code).value;
            }
          },
          sanitize: true
        });
       })();
    </script>
  </head>
  <body>
    <div class="container">

      <!-- http://blog.nodeknockout.com/post/35364532732/protip-add-the-vote-ko-badge-to-your-app -->
      <!-- <iframe src="http://nodeknockout.com/iframe/outcold" frameborder=0 scrolling=no allowtransparency=true width=115 height=25></iframe> -->

      <article><h1>Project Dialogues</h1>
<p>Hi there. I'm Den (<a href="http://outcoldman.com">outcoldman</a>) and this is project Dialogues, which participates in <a href="http://nodeknockout.com/">Node.js Knockout 2013</a>.</p>
<p>Do you like <a href="http://disqus.com/">Disqus</a>? I do. It is pretty cool project, allows you to add support for commentaries to any page in a second. But there are couple things which I don't like. I want to have an option to do some customization for how they render comments, how they store them, and of course I want to have <a href="http://daringfireball.net/projects/markdown/">markdown</a> support!</p>
<p>So, this is it. Project Dialogues. It is not a completed project (this is hackathon what do you expect from 2 days of coding?!), but much more than just a prototype. </p>
<p>So, let's take a look what it can do. </p>

<div class="dlgs-comment-preview"><h2>Example #1</h2>
<p>By default project Dialogues renders body commentaries as a simple text, but it is not hard at all to add support for markdown, just specify your body formatter like that (in my case I used <a href="https://github.com/chjj/marked">marked</a> library for rendering). I also used <a href="http://momentjs.com/">momentjs</a> to format dates in more human readable format. </p>
<pre><code>dialogues.render({
  dateFormatter: <span class="keyword">function</span>(date) {
    <span class="keyword">var</span> currentDate = <span class="keyword">new</span> Date();
    <span class="keyword">var</span> timezoneOffset = currentDate.getTimezoneOffset() * <span class="number">60</span>;
    <span class="keyword">return</span> moment.unix(date + timezoneOffset).fromNow();
  },
  bodyFormatter: <span class="keyword">function</span>(text) {
    <span class="keyword">return</span> marked(text);
  }
});</code></pre>
<h3>Preview Example #1</h3>

<div id="example1" class="dlgs">
<script type="text/javascript">
  (function(){"use strict";
    dialogues.render({
      id: 'my_blog_1',
      debug: true,
      load: {
        delay: false
      },
      dateFormatter: customDateFormatter,
      bodyFormatter: markdownBodyFormatter
    });
  })();
</script>
</div>

<h2>Example #2</h2>
<p>And it is not hard at all to place more than one dialogues on one page. Just specify for server different identities for Dialogues instances. And in this example I also specified that I want to load commentaries only when user will scroll to the place where we want to see them:</p>
<pre><code><span class="tag">dialogues</span><span class="class">.render</span>(<span class="rules">{
  <span class="rule"><span class="attribute">id</span>:<span class="value"> <span class="string">'my_blog_1'</span>,
  load: {
    delay: true
  }</span></span></span>
});</code></pre>
<h3>Preview Example #2</h3>

<div id="example2" class="dlgs">
<script type="text/javascript">
  (function(){"use strict";
    dialogues.render({
      id: 'my_blog_2',
      debug: true,
      load: {
        delay: true
      },
      dateFormatter: customDateFormatter
    });
  })();
</script>
</div>

<h2>How to use Dialogues</h2>
<h3>Using as a service</h3>
<p>Let's assume that <code>http://outcold.2013.nodeknockout.com</code> is a service, which provides for us Dialogues, in this case just include <code>dlgs.js</code> on your page:</p>
<pre><code class="lang-html"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://outcold.2013.nodeknockout.com/scripts/dlgs.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></pre>
<p>Add some CSS classes to make it pretty (one of the TODOs after this hackathon will be adding default themes). </p>
<p>At minimum just add this code to your web page:</p>
<pre><code><span class="tag">&lt;<span class="title">body</span>&gt;</span>

  <span class="tag">&lt;<span class="title">article</span>&gt;</span>
    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Dialogues is easy to use!<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
    <span class="tag">&lt;<span class="title">p</span>&gt;</span>Indeed<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">article</span>&gt;</span>

  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
    (<span class="keyword">function</span>() {
      dialogues.render();
    })();
  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="tag">&lt;/<span class="title">body</span>&gt;</span></code></pre>
<p>You can take a look on example here: <a href="http://jsfiddle.net/Wh5q7/1/"></a><a href="http://jsfiddle.net/Wh5q7/1/">http://jsfiddle.net/Wh5q7/</a></p>
<p>And of course all examples below are using Dialogues! </p>
</article>




  </body>
</html>